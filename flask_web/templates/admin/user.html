{% extends 'admin/master.html' %}

{% block head %}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <script src="https://kit.fontawesome.com/6d617ef3fb.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename = 'styles/admin.css') }}" />
  <script src="{{ url_for('static', filename = 'scripts/admin.js') }}"></script>
  <style>
    /* Add your custom styles here */
    .user-info {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
    }
    .user-avatar {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
    }
    .user-details {
      margin-top: 20px;
    }
  </style>
{% endblock %}

{%- block body -%}
  <h1 class="text-center mt-5">User Profile</h1>
  {% if info %}
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="user-info text-center">
            <img src="" alt="User Avatar" class="user-avatar" />
            <h2 class="mt-3">{{ info.first_name }} {{ info.last_name }}</h2>
            <p class="text-muted">{{ info.email }}</p>
            <div class="user-details">
              <p>
                <strong>Role:</strong> User
              </p>
              <p>
                <strong>Created At:</strong> {{ info.created_at }}
              </p>
              <p>
                <strong>Updated At:</strong> {{ info.updated_at }}
              </p>
            </div>
            <div class="mt-4">
              <a href="#" class="btn btn-success">Edit Profile</a>
              <a href="#" class="btn btn-danger m-4">Delete Account</a>
              <a href="#" class="btn btn-primary">View Surveys</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Fetch a random image from the Unsplash API
        fetch('https://source.unsplash.com/random')
          .then((response) => {
            // Set the image URL as the source of the user avatar
            document.getElementById('user-avatar').src = response.url
          })
          .catch((error) => console.error('Error fetching image:', error))
      })
    </script>
  {% endif %}
  {%- if errors -%}
    <div class="alert alert-danger" role="alert">{{ errors }}</div>
  {%- endif -%}
  {%- if success -%}
    <div class="alert alert-success" role="alert">{{ success }}</div>
  {%- endif -%}
{%- endblock -%}
